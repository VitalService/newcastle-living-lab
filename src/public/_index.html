<!DOCTYPE HTML>
<html>
<head>
	<script type="text/javascript" src="jquery-2.1.1.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
</head>
<body>

	<a href='designscreen.html' target='_blank'>designscreen</a></br></br>
	<a href='present.html' target='_blank'>present</a></br></br>
	<a href='library.html' target='_blank'>library</a></br></br>
	<a href='playlist.html' target='_blank'>playlist</a></br></br><br>

	<input name="view_name" placeholder="view0"><button id="go_view" type="button">Go to view &rarr;</button><br><br>

	<button id="identify_screens" type="button">Identify Screens</button><br><br>

	<p id = 'ip'>ip</p>
	<script>
		var ENTER_KEY = 13;
		var hostaddr = 'http://'+window.location.hostname+':'+window.location.port,
		ipaddr = null,
		url = null;

		var socket = io(hostaddr);

		$.getJSON(hostaddr+'/getaddress','',function (data,status,jqxhr) {
			ipaddr = data[0];
			url = "http://" + ipaddr + ":1337/";
			$('#ip').html("<a href='" + url + "'>" + url + "</a>");
		});

		$(document).ready(function() {
			$("body").on("click", "button#go_view", function() {
				openView();
			});
			$("body").on("click", "button#identify_screens", function() {
				socket.emit("ident:request");
			});
			$("input[name=view_name]").on("keypress", function(e) {
				if (e.which === ENTER_KEY) {
					openView();
				}
			});
		});

		function openView(viewName) {
			var viewName = $("input[name=view_name]").val();
			if (viewName === undefined || viewName.length == 0) {
				return;
			}
			window.open(url + viewName + ".html");
		}
	</script>

</body>
</html>
